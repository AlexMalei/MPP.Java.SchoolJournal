<section>
  <div class="container">
    <div class="row">
      <div class="col-md-10 col-md-offset-1">
        <tabset>
          <tab heading="Управление классами">
            <h1>Классы</h1>
            <div class="actions start">
              <button href="#" class="btn btn-success" (click)="openModalForAddClass()">Создать класс</button>
              <!--<button href="#" class="btn btn-danger" [disabled]="!selectedClass" (click)="deleteClass()">Удалить класс</button>-->
              <button href="#" class="btn btn-danger" [disabled]="!selectedClass" (click)="openClassTeacherModal()">Назначить классного руководителя</button>
              <!--<button href="#" [disabled]="!selectedClass" class="btn btn-danger">Выпустить класс</button>-->
            </div>
            <table class="table">
              <tbody>
              <tr *ngFor="let clazz of classes" (click)="selectClass(clazz.classId)" [class.selected]="selectedClass && clazz.classId == selectedClass.classId">
                <td>
                  {{clazz.number}} {{clazz.letterMark}}
                  <button class="btn btn-danger pull-right" (click)="selectClass(clazz.classId); showModalForDeleteClass()"><i class="glyphicon glyphicon-remove"></i> Удалить класс</button>
                </td>
              </tr>
              </tbody>
            </table>
            <div *ngIf="selectedClass">
              <h1>Ученики {{selectedClass.number}} {{selectedClass.letterMark}} класса</h1>
              <div class="actions">
                <div>
                  <div class="btn-group" role="group">
                    <button type="button" class="btn btn-info" (click)="savePDF()">.PDF</button>
                    <button type="button" class="btn btn-info" (click)="saveCSV()">.CSV</button>
                    <button type="button" class="btn btn-info" (click)="saveXLS()">.XLSX</button>
                  </div>
                </div>
              </div><br>
              <!--<div class="actions start">-->
                <!--<button href="#" [disabled]="!selectedPupil" (click)="removeFromClass()" class="btn btn-danger ">Удалить из класса</button>-->
              <!--</div>-->
              <p><strong>Классный руководитель: </strong>{{getClassTeacherOfSelectedClass()}}</p>
              <table class="table">
                <tbody>
                <tr *ngFor="let pupil of pupils" (click)="selectPupil(pupil.userId)" [class.selected]="selectedPupil && selectedPupil.userId === pupil.userId">
                  <td>
                    <a routerLink="/profile/{{pupil.userId}}">{{pupilsService.getPupilFullName(pupil)}}</a>
                    <button class="btn btn-danger pull-right" (click)="selectPupil(pupil.userId); showModalForRemoveFromClass()"><i class="glyphicon glyphicon-remove"></i> Удалить из класса</button>
                  </td>
                </tr>
                </tbody>
              </table>
            </div>
          </tab>
          <tab heading="Ученики, не состоящие в классе">
            <h1>Ученики, не состоящие в классе</h1>
            <!--<div class="actions start">-->
              <!--<button href="#" [disabled]="!selectedPupilWithoutClass" (click)="openClassForPupilModal()" class="btn btn-success">Определить в класс</button>-->
            <!--</div>-->
            <table class="table">
              <tbody>
              <tr *ngFor="let pupil of pupilsWithoutClass" (click)="selectPupilWithoutClass(pupil.userId)" [class.selected]="selectedPupilWithoutClass && selectedPupilWithoutClass.userId === pupil.userId">
                <td><a routerLink="/profile/{{pupil.userId}}">{{pupilsService.getPupilFullName(pupil)}}</a>
                  <button class="btn btn-success pull-right" (click)="selectPupilWithoutClass(pupil.userId); openClassForPupilModal()"><i class="glyphicon glyphicon-education action-i"></i> Определить в класс</button></td>
              </tr>
              </tbody>
            </table>
          </tab>
        </tabset>
      </div>
    </div>
  </div>
</section>

<!--<section>-->
  <!--<div class="container">-->
    <!--<div class="row">-->
      <!--<div class="col-md-10 col-md-offset-1">-->
        <!--<h1>Классы</h1>-->
        <!--<table class="table">-->
          <!--<tbody>-->
            <!--<tr *ngFor="let clazz of classes" (click)="selectClass(clazz.classId)" [class.selected]="selectedClass && clazz.classId == selectedClass.classId">-->
              <!--<td>{{clazz.number}} {{clazz.letterMark}}</td>-->
            <!--</tr>-->
          <!--</tbody>-->
        <!--</table>-->
        <!--<div class="actions start">-->
          <!--<button href="#" class="btn btn-success" (click)="openModalForAddClass()">Создать класс</button>-->
          <!--<button href="#" class="btn btn-danger" [disabled]="!selectedClass" (click)="deleteClass()">Удалить класс</button>-->
          <!--<button href="#" class="btn btn-danger" [disabled]="!selectedClass" (click)="openClassTeacherModal()">Назначить классного руководителя</button>-->
          <!--&lt;!&ndash;<button href="#" [disabled]="!selectedClass" class="btn btn-danger">Выпустить класс</button>&ndash;&gt;-->
        <!--</div>-->
      <!--</div>-->
    <!--</div>-->
  <!--</div>-->
<!--</section>-->

<!--<section *ngIf="selectedClass">-->
  <!--<div class="container">-->
    <!--<div class="row">-->
      <!--<div class="col-md-10 col-md-offset-1">-->
        <!--<h1>Ученики {{selectedClass.number}} {{selectedClass.letterMark}} класса</h1>-->
        <!--<p><strong>Классный руководитель: </strong>{{getClassTeacherOfSelectedClass()}}</p>-->
        <!--<table class="table">-->
          <!--<tbody>-->
            <!--<tr *ngFor="let pupil of pupils" (click)="selectPupil(pupil.userId)" [class.selected]="selectedPupil && selectedPupil.userId === pupil.userId">-->
              <!--<td><a routerLink="/profile/{{pupil.userId}}">{{pupilsService.getPupilFullName(pupil)}}</a></td>-->
            <!--</tr>-->
          <!--</tbody>-->
        <!--</table>-->
        <!--<div class="actions start">-->
          <!--<button href="#" [disabled]="!selectedPupil" (click)="removeFromClass()" class="btn btn-danger ">Удалить из класса</button>-->
        <!--</div>-->
      <!--</div>-->
    <!--</div>-->
  <!--</div>-->
<!--</section>-->

<!--<section *ngIf="pupilsWithoutClass">-->
  <!--<div class="container">-->
    <!--<div class="row">-->
      <!--<div class="col-md-10 col-md-offset-1">-->
        <!--<h1>Ученики, не состоящие в классе</h1>-->
        <!--<table class="table">-->
          <!--<tbody>-->
          <!--<tr *ngFor="let pupil of pupilsWithoutClass" (click)="selectPupilWithoutClass(pupil.userId)" [class.selected]="selectedPupilWithoutClass && selectedPupilWithoutClass.userId === pupil.userId">-->
            <!--<td><a routerLink="/profile/{{pupil.userId}}">{{pupilsService.getPupilFullName(pupil)}}</a></td>-->
          <!--</tr>-->
          <!--</tbody>-->
        <!--</table>-->
        <!--<div class="actions start">-->
          <!--<button href="#" [disabled]="!selectedPupilWithoutClass" (click)="openClassForPupilModal()" class="btn btn-success">Определить в класс</button>-->
        <!--</div>-->
      <!--</div>-->
    <!--</div>-->
  <!--</div>-->
<!--</section>-->


<div class="modal fade" bsModal #classModal="bs-modal"
     tabindex="-1" role="dialog" aria-labelledby="classForm" aria-hidden="true">
  <div *ngIf="currentClass" class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title pull-left">Класс</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="closeClassModal()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form>
          <div *ngIf="errorMessage" class="alert alert-danger">
            <div>{{errorMessage}}</div>
          </div>
          <div class="form-group">
            <label>Номер</label>
            <input type="text" class="form-control" [(ngModel)]="currentClass.number" name="number">
            <div *ngIf="validationError.number.status" class="alert alert-danger">
              <div>{{validationError.number.message}}</div>
            </div>
          </div>
          <div class="form-group">
            <label>Обозначение</label>
            <input type="text" class="form-control" [(ngModel)]="currentClass.letterMark" name="letterMark">
            <div *ngIf="validationError.letterMark.status" class="alert alert-danger">
              <div>{{validationError.letterMark.message}}</div>
            </div>
          </div>

          <button type="submit" class="btn btn-default" (click)="onFormSubmit()">Готово</button>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" bsModal #classForPupilModal="bs-modal"
     tabindex="-1" role="dialog" aria-labelledby="classForPupilForm" aria-hidden="true">
  <div *ngIf="classForPupil" class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title pull-left">Определить ученика в класс</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="closeClassForPupilModal()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-group">
            <label>Класс</label>
            <div *ngIf="errorMessage" class="alert alert-danger">
              <div>{{errorMessage}}</div>
            </div>
            <select class="form-control" [(ngModel)]="classForPupil.classId" name="class">
              <option *ngFor="let clazz of classes" value="{{clazz.classId}}">{{clazz.number}} {{clazz.letterMark}}</option>
            </select>
            <div *ngIf="validationError.classId.status" class="alert alert-danger">
              <div>{{validationError.classId.message}}</div>
            </div>
          </div>

          <button type="submit" class="btn btn-default" (click)="onClassForPupilFormSubmit()">Готово</button>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" bsModal #classTeacherModal="bs-modal"
     tabindex="-1" role="dialog" aria-labelledby="classTeacherForm" aria-hidden="true">
  <div *ngIf="classTeacher" class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title pull-left">Назначить классного руководителя</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="closeClassTeacherModal()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-group">
            <label>Учитель</label>
            <div *ngIf="errorMessage" class="alert alert-danger">
              <div>{{errorMessage}}</div>
            </div>
            <select class="form-control" [(ngModel)]="classTeacher" name="classTeacher">
              <option *ngFor="let teacher of teachers" value="{{teacher.userId}}">{{teachersService.getTeacherFullName(teacher)}}</option>
            </select>
            <div *ngIf="validationError.classTeacher.status" class="alert alert-danger">
              <div>{{validationError.classTeacher.message}}</div>
            </div>
          </div>

          <button type="submit" class="btn btn-default" (click)="onClassTeacherFormSubmit()">Готово</button>
        </form>
      </div>
    </div>
  </div>
</div>

<delete-modal [yesCallback]="yesCallbackForDeleteModalComponent"
  [noCallback]="noCallbackForDeleteModalComponent"
  [isActive]="isDeleteModalComponentActive"></delete-modal>
